<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link rel="stylesheet" type="text/css" media="screen" href="../../css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="../../css/dataTables.bootstrap.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="../../layui/css/layui.css">

    <style>
        .title {
            text-align: center;
            line-height: 30px;
            color: black;
            font-weight: 600;
            background-color: #e4e4e4;
            height: 30px;
        }

        .table {
            margin: 0;
        }

        p {
            word-wrap: break-word;
            word-break: break-all;
        }
    </style>
</head>
<body>
<a  id="return"  style="position: absolute;height: 30px;margin-left: 10px;margin-top: 30px;" type="button" class="layui-btn layui-btn-primary"><p style="line-height: 30px;text-align: center;">返&nbsp;&nbsp;&nbsp;&nbsp;回</p></a>
<a  id="no_sub"  style="position: absolute;height: 30px;margin-left: 10px;margin-top: 60px;" type="button" class="layui-btn layui-btn-primary"><p style="line-height: 30px;text-align: center;">未提交</p></a>
<a  id="check"  style="position: absolute;height: 30px;margin-left: 10px;margin-top: 90px;" type="button" class="layui-btn layui-btn-primary"><p style="line-height: 30px;text-align: center;">待审核</p></a>
<a  id="no_pass"  style="position: absolute;height: 30px;margin-left: 10px;margin-top: 120px;" type="button" class="layui-btn layui-btn-primary"><p style="line-height: 30px;text-align: center;">不通过</p></a>
<a  id="pass"  style="position: absolute;height: 30px;margin-left: 10px;margin-top: 150px;" type="button" class="layui-btn layui-btn-primary"><p style="line-height: 30px;text-align: center;">通&nbsp;&nbsp;&nbsp;&nbsp;过</p></a>




<div style="margin-top: 10px;" class="layui-row">
    <div class="layui-col-xs10 layui-col-sm10 layui-col-md10 layui-col-lg10
layui-col-xs-offset1 layui-col-sm-offset1 layui-col-md-offset1 layui-col-lg-offset1">
        <p class="title">我的日志</p>


        <div id="zijin">
            <table class="table table-striped table-bordered table-hover">
                <colgroup>
                    <col width="80">
                    <col width="200">
                    <col width="50">
                    <col width="50">
                    <col width="50">
                </colgroup>
                <thead>
                <tr>
                    <th style="text-align: center;">创建时间</th>
                    <th style="text-align: center;">日志标题</th>
                    <th style="text-align: center;">状态</th>
                    <th style="text-align: center;">详情</th>
                    <th style="text-align: center;">操作</th>
                </tr>


                </thead>
                <tbody id="content" >
                </tbody>
            </table>
        </div>

        <div id="zijin2" style="display: none;">
            <table class="table table-striped table-bordered table-hover">
                <colgroup>
                    <col width="80">
                    <col width="200">
                    <col width="50">
                    <col width="50">
                </colgroup>
                <thead>
                <tr>
                    <th style="text-align: center;">创建时间</th>
                    <th style="text-align: center;">日志标题</th>
                    <th style="text-align: center;">状态</th>
                    <th style="text-align: center;">操作</th>
                </tr>

                </thead>
                <tbody id="content2" >
                </tbody>
            </table>
        </div>
        <div id="zijin3" style="display: none;">
            <table class="table table-striped table-bordered table-hover">
                <colgroup>
                    <col width="80">
                    <col width="200">
                    <col width="50">
                    <col width="50">
                    <col width="50">
                </colgroup>
                <thead>
                <tr>
                    <th style="text-align: center;">创建时间</th>
                    <th style="text-align: center;">日志标题</th>
                    <th style="text-align: center;">状态</th>
                    <th style="text-align: center;">操作</th>
                </tr>


                </thead>
                <tbody id="content3" >
                </tbody>
            </table>
        </div>

        <div id="zijin4" style="display: none;">
            <table class="table table-striped table-bordered table-hover">
                <colgroup>
                    <col width="80">
                    <col width="200">
                    <col width="50">
                    <col width="50">
                    <col width="50">
                </colgroup>
                <thead>
                <tr>
                    <th style="text-align: center;">创建时间</th>
                    <th style="text-align: center;">日志标题</th>
                    <th style="text-align: center;">状态</th>
                    <th style="text-align: center;">操作</th>
                    <th style="text-align: center;">提交</th>
                </tr>


                </thead>
                <tbody id="content4" >
                </tbody>
            </table>
        </div>

    </div>
</div>


<form class="form-horizontal" onsubmit="return false" id="form">
    <input type="hidden" id="id" name="id" value="">
    <input type="hidden" id="status" name="status" value="1">

</form>

</body>


<script src="../../js/constant.js"></script>
<script type="text/javascript" src="../../js/libs/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="../../js/jq.js"></script>
<script type="text/javascript" src="../../js/plugin/bootstrapvalidator/bootstrapValidator.min.js"></script>
<script type="text/javascript" src="../../js/common.js"></script>
<script type="text/javascript" src="../../layui/layui.js"></script>

<script type="text/javascript" src="../../js/project/initData.js"></script>
<script type="text/javascript" src="../../js/project/projectDetails.js"></script>


<script>
    layui.use(['layer'], function () {
        var layer = layui.layer;
    });
    var proId = getUrlParam("id");
    var money=0;
    var urls=[];
    $(function() {
        $.ajax({
            type: 'get',
            url : domainName + '/project-record/record/findAll/'+proId,
            async: false,
            contentType: "application/json; charset=utf-8",
            success: function (res) {
                var str = '';
                var str1 = '';
                var str2 = '';
                var str3 = '';

                $(res).each(function () {
                    if (this.status == 1) {

                        str += '<tr>'
                            + '<th style="text-align: center;">' + this.time + '</th>'
                            + '<th style="text-align: center;">' + this.title + '</th>'
                            + '<th style="text-align: center;">' + this.state + ' </th>'
                            + '<th  style="text-align: center;"><a href="implement.html?id='+this.id+'&&projectId='+this.projectId+'&&return=1">详情</a></th>'
                            + '<th style="text-align: center;">'
                            + ' <button  onclick="post(' + this.id + ')" type="button" class="layui-btn layui-btn-primary layui-btn-xs">提交</button>'
                            + ' <button  onclick="del (' + this.id + ')" type="button" class="layui-btn layui-btn-primary layui-btn-xs">删除</button>'
                            + '</th>'
                            + '</tr>';
                    }
                    if (this.status == 2) {

                        str1 += '<tr>'
                            + '<th style="text-align: center;">' + this.time + '</th>'
                            + '<th style="text-align: center;">' + this.title + '</th>'
                            + '<th style="text-align: center;">' + this.state + ' </th>'
                            + '<th  style="text-align: center;"><a href="implement.html?id='+this.id+'&&projectId='+this.projectId+'&&return=1">详情</a></th>'
                            + '</tr>';
                    }

                    if (this.status == 3) {

                        str2+= '<tr>'
                            + '<th style="text-align: center;">' + this.time + '</th>'
                            + '<th style="text-align: center;">' + this.title + '</th>'
                            + '<th style="text-align: center;">' + this.state + ' </th>'
                            + '<th  style="text-align: center;"><a href="implement.html?id='+this.id+'&&projectId='+this.projectId+'&&return=1">详情</a></th>'
                            + '</tr>';
                    }
                    if (this.status == 4) {

                        str3+= '<tr>'
                            + '<th style="text-align: center;">' + this.time + '</th>'
                            + '<th style="text-align: center;">' + this.title + '</th>'
                            + '<th style="text-align: center;">' + this.state + ' </th>'
                            + '<th  style="text-align: center;"><a href="implement.html?id='+this.id+'&&projectId='+this.projectId+'&&return=1">详情</a></th>'
                            + '<th style="text-align: center;">'
                            + ' <button  onclick="post(' + this.id + ')" type="button" class="layui-btn layui-btn-primary layui-btn-xs">再次提交</button>'
                            + '</th>'
                            + '</tr>';
                    }
                })

                $("#content").append(str);
                $("#content2").append(str1);
                $("#content3").append(str2);
                $("#content4").append(str3);
                $("#no_sub").click();
            }
        })
    })


    function post(id) {
        $.ajax({
            type: 'put',
            url: domainName + '/project-record/record/submit/'+id,
            contentType: "application/json; charset=utf-8",
            async:false,
            success: function (res) {
                layer.msg("成功", {shift: -1, time: 1000}, function () {
                    location.reload();
                });


               /* $(location).attr("href", "submit.html?id=" + projectId);*/
            }
        })
    }
    function del(id){
        $.ajax({
            type: 'delete',
            url: domainName + '/project-record/record/'+id,
            contentType: "application/json; charset=utf-8",
            async:false,
            success: function (res) {
                layer.msg("成功", {shift: -1, time: 1000}, function () {
                    location.reload();
                });


                /*$(location).attr("href", "submit.html?id=" + projectId);*/
            }
        })
    }
    function getbudegetname(bid){
        $.ajax({
            type: 'get',
            url: domainName + '/project-item/item/budget/' + bid,
            async:false,
            contentType: "application/json; charset=utf-8",
            success: function (res) {
                subjectName=res.subject;
            }
        })
    }


    $("#return").click(function () {

        $(location).attr("href", "my_implement.html?id=" + proId);

    })

    function submit(id) {
        layer.msg("成功", {shift: -1, time: 1000}, function () {
            $(location).attr("href", "implement.html?id=" + id+"&&projectId="+proId);
        });

    }
    $("#no_pass").click(function () {
        $("#zijin").css("display","none");
        $("#zijin2").css("display","none");
        $("#zijin3").css("display","none");
        $("#zijin4").css("display","block");
    })

    $("#check").click(function () {
        $("#zijin").css("display","none");
        $("#zijin2").css("display","block");
        $("#zijin3").css("display","none");
        $("#zijin4").css("display","none");
    })

    $("#pass").click(function () {
        $("#zijin").css("display","none");
        $("#zijin2").css("display","none");
        $("#zijin3").css("display","block");
        $("#zijin4").css("display","none");
    })
    $("#no_sub").click(function () {
        $("#zijin").css("display","block");
        $("#zijin2").css("display","none");
        $("#zijin3").css("display","none");
        $("#zijin4").css("display","none");
    })
</script>

</html>